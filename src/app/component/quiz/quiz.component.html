<div class="quizContainer">
  <form [formGroup]="quizForm" *ngIf="quizForm">
    <div formArrayName="queList">
      <ngb-carousel
        #carousel
        [showNavigationArrows]="false"
        [showNavigationIndicators]="false"
        [interval]="0"
        [keyboard]="false"
        [ngStyle]="{'width': isMobileView ? '100%' : '80%', 'margin': 'auto'}"
      >
        <ng-template
          ngbSlide
          *ngFor="let que of queList().controls; let i = index"
        >
          <ng-container [formGroupName]="i">
            <div class="m-3">
              <div class="card quiz-card h-auto">
                <div
                  class="card-header header-txt py-0 px-3 d-flex align-items-center justify-content-between position-relative"
                >
                  <div
                    class="header-title user-select-none col-md-3 col-lg-3 col-sm-3"
                  >
                    {{ quizInfo?.title }}
                  </div>
                  <div
                    class="timer d-flex align-items-center justify-content-between rounded-2 px-2 py-0 w-auto px-2"
                  >
                    <div
                      class="timer-left-txt user-select-none col-auto mx-2"
                    >
                      <i class="bi bi-clock fs-23"></i>
                    </div>
                      <input type="text" formControlName="timer" readonly class="timer-input">
                  </div>
                </div>

                <div class="card-body que-txt d-inline-block rounded-2 p-3">
                  <div class="que-data user-select-none">
                    {{ "Q-" + (i + 1) }} {{ subRandomQueList.questions[i]["question"] }}
                    <p class="fs-15"> {{ subRandomQueList.questions[i].type === 'checkbox' ? "( You can select multiple options )" : "( You can select only one option )" }} </p>
                  </div>

                  <div class="option-list">
                    <ng-container
                      *ngFor="
                        let card of subRandomQueList.questions[i].options;">
                      <div class="mx-0">
                        <label
                          class="form-check-label option px-3 py-2 mt-3 w-100 rounded-2 align-items-center user-select-none"
                          (click)="onSelectAnswer(card, i)"
                          [class.hightlight-selected]="checkSelected(card.id)"
                        >
                          {{ card.label }}
                        </label>
                      </div>
                    </ng-container>
                  </div>
                </div>

                <div
                  class="card-footer footer-txt py-0 px-3 d-flex align-items-center justify-content-between position-relative"
                >
                  <div class="total-que">
                    <p
                      class="footer-right-txt py-0 px-1 text-center user-select-none m-0"
                    >
                      <strong>{{ i + 1 }}</strong> Of
                      <strong>{{ subRandomQueList.questions.length }}</strong> Questions
                    </p>
                  </div>

                  <div class="form-btn">

                    <ng-container *ngIf="i + 1 == 1">
                      <button (click)="exitFromQuiz()" type="button" class="btn btn-danger"> Exit </button>
                    </ng-container>

                    <ng-container *ngIf="i + 1 != 1">
                      <button
                        (click)="previous(i)"
                        type="button"
                        class="btn btn-secondary"
                      >
                        <span class="d-none d-md-block">Previous</span>
                        <span class="d-md-none">
                          <i class="fa-solid fa-chevron-left"></i>
                        </span>
                      </button>
                    </ng-container>

                    <button
                      type="button"
                      [disabled]="getFormControlItem()[i].controls['next'].value"
                      (click)="skip(subRandomQueList.questions[i], i)"
                      type="button"
                      class="btn btn-warning my-0 mx-2"
                    >
                      <span class="d-none d-md-block"> Skip </span>
                      <span class="d-md-none">
                        <i class="fa-solid fa-forward"></i>
                      </span>
                    </button>

                    <button
                      type="button"
                      (click)="next(i)"
                      class="btn btn-success"
                    >
                      <span class="d-none d-md-block">
                        {{ subRandomQueList.questions.length != i + 1 ? "Next" : "Submit" }}
                      </span>
                      <span class="d-md-none">
                        <i class="fa-solid fa-chevron-right"></i>
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </ng-container>
        </ng-template>
      </ngb-carousel>
    </div>
  </form>

  <ng-template #content let-modal>
    <div class="modal-header">
      <h4 class="modal-title">
        Test Completion Confirmation
      </h4>
      <button
        type="button"
        class="btn-close"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      ></button>
    </div>
    <div class="modal-body">
      <p>Congratulations! You have successfully completed the test. Thank you for your participation and effort. If you have any questions or concerns, please feel free to reach out to our support team.!&hellip;</p>
      <div>Great job</div>
    </div>
    <!-- <div class="modal-footer">
      <button
        type="button"
        class="btn btn-light"
        (click)="modal.close('Close click')"
      >
        Close
      </button>
    </div> -->
  </ng-template>
</div>
